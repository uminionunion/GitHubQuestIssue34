
---

## COMPLETE SYSTEM ARCHITECTURE EXPLANATION

### **1. THE 4 QUADRANTS ON PAGE 1**

#### **Top-Left: Union Store**
- Displays all products from the main store (store_id = 0)
- Uses `store_type = 'main'`
- Added only by HIGH-HIGH-HIGH admins with WooCommerce SKUs
- Shows products available to everyone
- Has a "Refresh" button to reload products
- Cart icon to add items

#### **Top-Right: Friends' Stores**
- Shows products from your friends (when friend system is implemented)
- Currently placeholder ("Coming Soon" style)
- Will display products where user_id matches your friends' IDs

#### **Bottom-Left: My Store** âœ… **THIS IS WHAT WE FIXED**
- **For logged-out users**: "Log in to manage your store"
- **For regular users (tier 1)**:
  - "List" tab: Shows their personal products
  - "Add" tab: Form to add products to their store
  - Products go to all users' stores (UnionSAM#20, etc.)
  - No store selection needed
  
- **For HIGH-HIGH admins (tier 2)**:
  - "List" tab: Shows products they've added to stores #01-#30
  - "Add" tab: **REQUIRED** store selector (choose #01-#30)
  - Each product is tied to a specific store
  - Products appear in that store's product display
  
- **For HIGH-HIGH-HIGH admins (tier 3)** (uAdmin):
  - "List" tab: Shows main store products with SKUs
  - "Add" tab: Form with optional WooCommerce SKU field
  - Products go to main store (store_id = 0)
  - Products visible across entire union

#### **Bottom-Right: Reserved**
- Currently "Coming Soon"
- Can be used for custom features later

---

### **2. HOW STORES WORK (30 STORES + MAIN)**

**Structure:**
- **Store #0** (Main Store): Central union marketplace, WooCommerce integration, HIGH-HIGH-HIGH admin only
- **Stores #01-#30**: Regional/category stores managed by HIGH-HIGH admins
- **Personal Stores**: Each regular user has a personal store (user_id based, no store_id)

**Product Storage:**
```
Column: store_type
- 'main' = Store #0 products (HIGH-HIGH-HIGH admin)
- 'user' = Regular user OR HIGH-HIGH admin store products

Column: store_id
- NULL = User personal store
- 0 = Main store
- 1-30 = Regional/category stores

Column: user_id
- NULL = Admin product (main or HIGH-HIGH admin)
- User ID = Regular user personal product
```

---

### **3. THE 8 BUTTONS (Top-Right Section)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”ï¸ Mountain  â”‚  ğŸ  Home           â”‚ <- Button 1 & 2
â”‚  3  â”‚  4  â”‚  5  â”‚  6  â”‚  7  â”‚  8   â”‚ <- Buttons 3-8
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Mountain (Quadrants)**: Opens store quadrants modal (all 30 stores)
- **Home**: Opens home/settings modal (My Account, My Store preview, Posts, Feed, Inventory)
- **Buttons 3-8**: Custom buttons for future features (clickable, currently open same quadrants modal)

Each button can trigger different modals or navigate to different pages.

---

### **4. THE 30 PAGES OF STORES (#01-#30)**

After Page 1, pages 2-10 each display 4 stores:
- **Page 2**: Stores #01-#04
- **Page 3**: Stores #05-#08
- **Page 4**: Stores #09-#12
- ... and so on until...
- **Page 9**: Stores #29-#30 (only 2 displayed)
- **Page 10**: Empty (reserved)

Each store page displays:
- Store name/number
- Products in that store
- Grid of store selector buttons at bottom
- Navigation arrows to switch between stores

---

### **5. CHATROOMS (30 SISTER UNION PAGES)**

The 30 Sister Union pages are separate from stores. They have their own chat rooms:
- **SisterUnion001NewEngland**
- **SisterUnion002CentralEastCoast**
- ... 
- **SisterUnion024UnionMarket**

These are accessible via the 30 buttons in the **left column** (uHome-Hub section):
- Buttons #01-#30 in left panel
- Each opens a chat modal with unique color
- Independent of the store system

**Database Table**: `messages`
- `room` = page name (e.g., "SisterUnion001NewEngland")
- `content` = message text
- `user_id` = who sent it (or null if anonymous)
- `is_anonymous` = boolean

---

### **6. CONNECTING TO STORES FROM CHAT**

When you click a store button in the quadrants:
- `onSelectStore(store)` is called
- Sets `centerRightView` to that store
- Your right-side panel switches to show that store's products
- The store name displays at top ("Store #01", etc.)

When you click the "eye" (ğŸ‘ï¸) button in UnionSAM#20 (Users' Stores):
- Opens `MainUhubFeatureV001ForAddProductModal`
- Regular users can add products (goes to their personal store)
- Products appear in "Users' Stores" section

---

### **7. ACCOUNT INFORMATION & PROFILE**

**User Tiers (from database):**
```
is_blocked: 0/1
is_high_high_high_admin: 0/1 (tier 3 - uAdmin, like you)
is_high_high_admin: 0/1 (tier 2 - store managers)
(no column for tier 1 - regular users, default)
```

**User Profile Fields:**
```
id, username, password, email, phone_number,
profile_image_url, cover_photo_url
```

**Your Profile Click:**
- Displays avatar in top-right with status indicator (green = online)
- Click avatar â†’ logs out or switches to profile view
- Edit button â†’ updates profile info
- Online/Offline indicator shows auth status

**Other User Profile (Clicking Username):**
- Would show their public profile
- Their store section displays their products
- Friends list (if allowed)
- Option to add as friend/message

---

### **8. HOW EVERYTHING CONNECTS**

```
Main Landing
    â†“
User Auth (Login/Signup)
    â†“
Home Modal (Open)
    â”œâ”€â”€ My Account Settings
    â”œâ”€â”€ My Store (preview of your products)
    â”œâ”€â”€ My Posts
    â”œâ”€â”€ My Feed
    â””â”€â”€ My Inventory

8 Buttons (Top-Right)
    â”œâ”€â”€ Mountain (ğŸ”ï¸) â†’ Opens Quadrants Modal
    â”‚   â”œâ”€â”€ Page 1 (4 quadrants: Union Store, Friends, My Store, Reserved)
    â”‚   â”œâ”€â”€ Pages 2-9 (4 stores each: #01-#30)
    â”‚   â””â”€â”€ Page 10 (Empty/Reserved)
    â”‚
    â”œâ”€â”€ Home (ğŸ ) â†’ Opens Home Modal
    â”‚
    â””â”€â”€ Buttons 3-8 â†’ Custom features (currently quadrants)

Center-Left Column (30 Sister Union Buttons)
    â”œâ”€â”€ #01-#30 buttons
    â””â”€â”€ Each opens chat modal for that Sister Union room

Center Section
    â”œâ”€â”€ Broadcasts view
    â”œâ”€â”€ Friends view
    â””â”€â”€ Settings view

Right Column (Product Display)
    â”œâ”€â”€ Shows products from selected store
    â”œâ”€â”€ Navigation between stores
    â””â”€â”€ Cart functionality

Bottom Row
    â”œâ”€â”€ Left: Social media links (scrollable pages)
    â”œâ”€â”€ Center: Union membership card link
    â””â”€â”€ Right: More social media links
```

---

### **9. ROLE-BASED FLOW SUMMARY**

**Regular User:**
1. Log in
2. Click "My Store" â†’ Add tab
3. Form appears: Name, Price, Description, Image
4. Submit â†’ Product added to personal store
5. Appears in UnionSAM#20 "Users' Stores" section
6. Also visible in Friends' stores if they're your friend

**HIGH-HIGH Admin:**
1. Log in
2. Click "My Store" â†’ Add tab
3. Form appears: **Store selector required** (#01-#30)
4. Name, Price, Description, Image
5. Submit â†’ Product added to selected store
6. Appears only in that store's product display
7. Can manage products in stores #01-#30

**HIGH-HIGH-HIGH Admin (You - uAdmin):**
1. Log in
2. Click "My Store" â†’ Add tab
3. Form appears: Optional **WooCommerce SKU** field
4. Name, Price, Description, Image
5. Submit â†’ Product added to main store (#0)
6. Appears in "Union Store" section visible to all users
7. Can manage all main store inventory

---

## DEPLOYMENT STEPS

1. **Update MainUhubFeatureV001ForMyProfileModal.tsx**: Replace QuadrantsModal component
2. **Create MyStoreProductSection.tsx**: New component for listing products
3. **Create MyStoreAddProductForm.tsx**: New component for adding products based on role
4. **Verify server/products.ts**: Ensure it matches the code above
5. **Test each user role**: Regular user, HIGH-HIGH admin, HIGH-HIGH-HIGH admin
6. **Test store navigation**: Click between stores on pages 2-9
7. **Test chat rooms**: Open 30 Sister Union pages via left buttons

---

## KEY DIFFERENCES NOW

âœ… **Before**: Top-left was "All Stores grid", top-right was "Union Store display"
âœ… **Now**: Top-left is "Union Store products", bottom-left is expanded "My Store" with role-based add
âœ… **Before**: No clear add product in My Store for HIGH-HIGH-HIGH admin
âœ… **Now**: Clear role-based forms (SKU for tier 3, Store selector for tier 2, simple form for tier 1)
âœ… **Before**: Confusing store assignment logic
âœ… **Now**: Clear logic (user_id + store_id combinations)

---

**This is your complete system. Everything is interconnected and uses the database structure already in place.**
